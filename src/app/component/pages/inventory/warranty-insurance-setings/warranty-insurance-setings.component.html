<div class="warranty-settings-container">
	<!-- No Asset Selected -->
	<ng-template #noAsset>
		<div class="no-asset-state">
			<div class="no-asset-icon">
				<svg viewBox="0 0 24 24">
					<path fill="currentColor" d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
				</svg>
			</div>
			<h4>Niciun bun selectat</h4>
			<p>Selectează un bun pentru a putea gestiona garanția și asigurarea</p>
		</div>
	</ng-template>

	<!-- With Asset -->
	<div *ngIf="assetId" class="settings-content">
		<!-- Main Menu -->
		<div *ngIf="!showWarrantyFormSection && !showInsuranceFormSection" class="main-menu">
			<div class="menu-header">
				<div class="asset-info">
					<svg class="asset-icon" viewBox="0 0 24 24">
						<path fill="currentColor" d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4z"/>
					</svg>
					<div>
						<h4>Bun #{{assetId}}</h4>
						<p>Selectează tipul de setări pe care dorești să le gestionezi</p>
					</div>
				</div>
			</div>
			
			<div class="menu-cards">
				<div class="menu-card" (click)="openWarrantySection()">
					<div class="card-icon warranty">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
						</svg>
					</div>
					<div class="card-content">
						<h5>Setări garanție</h5>
						<p>Gestionează informațiile despre garanția produsului</p>
						<div class="card-features">
							<span class="feature">
								<svg viewBox="0 0 24 24">
									<path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
								</svg>
								Provider
							</span>
							<span class="feature">
								<svg viewBox="0 0 24 24">
									<path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
								</svg>
								Perioadă
							</span>
						</div>
					</div>
					<div class="card-arrow">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
						</svg>
					</div>
				</div>
				
				<div class="menu-card" (click)="openInsuranceSection()">
					<div class="card-icon insurance">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
						</svg>
					</div>
					<div class="card-content">
						<h5>Setări asigurare</h5>
						<p>Gestionează informațiile despre asigurarea bunului</p>
						<div class="card-features">
							<span class="feature">
								<svg viewBox="0 0 24 24">
									<path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
								</svg>
								Număr poliță
							</span>
							<span class="feature">
								<svg viewBox="0 0 24 24">
									<path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
								</svg>
								Data expirare
							</span>
						</div>
					</div>
					<div class="card-arrow">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
						</svg>
					</div>
				</div>
			</div>
		</div>

		<!-- Warranty Form Section -->
		<div *ngIf="showWarrantyFormSection" class="form-section">
			<div class="section-header">
				<button class="back-btn" (click)="backToMenu()">
					<svg viewBox="0 0 24 24">
						<path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
					</svg>
					<span>Înapoi</span>
				</button>
				<div class="header-content">
					<div class="section-icon warranty">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
						</svg>
					</div>
					<h4>Setări garanție</h4>
					<p>Gestionează informațiile despre garanția bunului</p>
				</div>
			</div>

			<!-- Loading State -->
			<div *ngIf="loading" class="loading-state">
				<div class="spinner"></div>
				<p>Se încarcă informațiile...</p>
			</div>

			<!-- Error State -->
			<div *ngIf="error && !loading" class="error-state">
				<svg viewBox="0 0 24 24">
					<path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
				</svg>
				<p>{{error}}</p>
			</div>

			<!-- Content -->
			<div *ngIf="!loading" class="section-content">
				<!-- Existing Warranty -->
				<form *ngIf="warrantyData" [formGroup]="warrantyForm" (ngSubmit)="saveWarranty()" class="warranty-form">
					<div class="warranty-info">
						<div class="info-header">
							<h5>Garanție existentă</h5>
							<div class="status-badge" [ngClass]="getWarrantyStatus(warrantyData)">
								{{ getWarrantyStatusText(warrantyData) }}
							</div>
						</div>
						<div class="info-grid">
							<div class="info-item">
								<label>Furnizor</label>
								<p class="info-value">{{warrantyData.provider}}</p>
							</div>
							<div class="info-item">
								<label>Data început</label>
								<p class="info-value">{{formatDate(warrantyData.startDate)}}</p>
							</div>
							<div class="info-item">
								<label>Data expirare</label>
								<p class="info-value">{{formatDate(warrantyData.endDate)}}</p>
							</div>
							<div class="info-item">
								<label>Zile rămase</label>
								<p class="info-value days-remaining">{{calculateDaysRemaining(warrantyData.endDate)}}</p>
							</div>
						</div>
					</div>

					<h5 class="form-title">Editează garanție</h5>
					
					<div class="form-grid">
						<div class="form-group">
							<label>
								<svg class="label-icon" viewBox="0 0 24 24">
									<path fill="currentColor" d="M21.9 8.89l-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89zm-2.99-3.9l1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5l1.93-.01z"/>
								</svg>
								<span>Furnizor *</span>
							</label>
							<div class="input-wrapper">
								<input formControlName="provider" type="text" placeholder="Ex: Samsung, Apple..." />
							</div>
						</div>

						<div class="form-group">
							<label>
								<svg class="label-icon" viewBox="0 0 24 24">
									<path fill="currentColor" d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM5 6v2h14V6H5zm2 4h10v2H7zm0 4h7v2H7z"/>
								</svg>
								<span>Data început *</span>
							</label>
							<div class="input-wrapper">
								<input formControlName="startDate" type="date" />
							</div>
						</div>

						<div class="form-group">
							<label>
								<svg class="label-icon" viewBox="0 0 24 24">
									<path fill="currentColor" d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
								</svg>
								<span>Data expirare *</span>
							</label>
							<div class="input-wrapper">
								<input formControlName="endDate" type="date" />
							</div>
						</div>
					</div>

					<div class="form-actions">
						<button type="submit" class="btn-primary" [disabled]="loading || warrantyForm.invalid">
							<svg viewBox="0 0 24 24" *ngIf="!loading">
								<path fill="currentColor" d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
							</svg>
							<div class="spinner" *ngIf="loading"></div>
							<span>{{ loading ? 'Se salvează...' : 'Salvează modificări' }}</span>
						</button>
						<button type="button" class="btn-danger" (click)="deleteWarranty()" [disabled]="loading">
							<svg viewBox="0 0 24 24">
								<path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
							</svg>
							<span>Șterge garanție</span>
						</button>
					</div>
				</form>

				<!-- No Warranty - Add Form -->
				<div *ngIf="!warrantyData" class="no-warranty-state">
					<div class="empty-state">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
						</svg>
						<h5>Nicio garanție configurată</h5>
						<p>Acest bun nu are încă o garanție configurată. Adaugă una nouă.</p>
					</div>

					<form [formGroup]="warrantyForm" (ngSubmit)="saveWarranty()" class="add-warranty-form">
						<h5>Adaugă garanție nouă</h5>
						
						<div class="form-grid">
							<div class="form-group">
								<label>
									<svg class="label-icon" viewBox="0 0 24 24">
										<path fill="currentColor" d="M21.9 8.89l-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89zm-2.99-3.9l1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5l1.93-.01z"/>
									</svg>
									<span>Furnizor *</span>
								</label>
								<div class="input-wrapper">
									<input formControlName="provider" type="text" placeholder="Ex: Samsung, Apple..." />
								</div>
							</div>

							<div class="form-group">
								<label>
									<svg class="label-icon" viewBox="0 0 24 24">
										<path fill="currentColor" d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM5 6v2h14V6H5zm2 4h10v2H7zm0 4h7v2H7z"/>
									</svg>
									<span>Data început *</span>
								</label>
								<div class="input-wrapper">
									<input formControlName="startDate" type="date" />
								</div>
							</div>

							<div class="form-group">
								<label>
									<svg class="label-icon" viewBox="0 0 24 24">
										<path fill="currentColor" d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
									</svg>
									<span>Data expirare *</span>
								</label>
								<div class="input-wrapper">
									<input formControlName="endDate" type="date" />
								</div>
							</div>
						</div>

						<div class="form-actions">
							<button type="submit" class="btn-primary" [disabled]="loading || warrantyForm.invalid">
								<svg viewBox="0 0 24 24" *ngIf="!loading">
									<path fill="currentColor" d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
								</svg>
								<div class="spinner" *ngIf="loading"></div>
								<span>{{ loading ? 'Se salvează...' : 'Adaugă garanție' }}</span>
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!-- Insurance Form Section -->
		<div *ngIf="showInsuranceFormSection" class="form-section">
			<div class="section-header">
				<button class="back-btn" (click)="backToMenu()">
					<svg viewBox="0 0 24 24">
						<path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
					</svg>
					<span>Înapoi</span>
				</button>
				<div class="header-content">
					<div class="section-icon insurance">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
						</svg>
					</div>
					<h4>Setări asigurare</h4>
					<p>Gestionează informațiile despre asigurarea bunului</p>
				</div>
			</div>

			<!-- Loading State -->
			<div *ngIf="loading" class="loading-state">
				<div class="spinner"></div>
				<p>Se încarcă informațiile...</p>
			</div>

			<!-- Error State -->
			<div *ngIf="error && !loading" class="error-state">
				<svg viewBox="0 0 24 24">
					<path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
				</svg>
				<p>{{error}}</p>
			</div>

			<!-- Content -->
			<div *ngIf="!loading" class="section-content">
				<!-- Existing Insurance -->
				<form *ngIf="insuranceData" [formGroup]="insuranceForm" (ngSubmit)="saveInsurance()" class="insurance-form">
					<div class="insurance-info">
						<div class="info-header">
							<h5>Asigurare existentă</h5>
							<div class="status-badge" [ngClass]="getInsuranceStatus(insuranceData)">
								{{ getInsuranceStatusText(insuranceData) }}
							</div>
						</div>
						<div class="info-grid">
							<div class="info-item">
								<label>Companie</label>
								<p class="info-value">{{insuranceData.company}}</p>
							</div>
							<div class="info-item">
								<label>Valoare asigurată</label>
								<p class="info-value">{{insuranceData.insuredValue}}</p>
							</div>
							<div class="info-item">
								<label>Data început</label>
								<p class="info-value">{{formatDate(insuranceData.startDate)}}</p>
							</div>
							<div class="info-item">
								<label>Data expirare</label>
								<p class="info-value">{{formatDate(insuranceData.endDate)}}</p>
							</div>
							<div class="info-item">
								<label>Zile rămase</label>
								<p class="info-value days-remaining">{{calculateDaysRemaining(insuranceData.endDate)}}</p>
							</div>
						</div>
					</div>

					<h5 class="form-title">Editează asigurare</h5>
					<div class="form-grid">
						<div class="form-group">
							<label>
								<span>Companie *</span>
							</label>
							<div class="input-wrapper">
								<input formControlName="company" type="text" placeholder="Ex: Allianz, Generali..." />
							</div>
						</div>
						<div class="form-group">
							<label>
								<span>Valoare asigurată *</span>
							</label>
							<div class="input-wrapper">
								<input formControlName="insuredValue" type="number" placeholder="0.00" />
							</div>
						</div>
						<div class="form-group">
							<label>
								<span>Data început *</span>
							</label>
							<div class="input-wrapper">
								<input formControlName="startDate" type="date" />
							</div>
						</div>
						<div class="form-group">
							<label>
								<span>Data expirare *</span>
							</label>
							<div class="input-wrapper">
								<input formControlName="endDate" type="date" />
							</div>
						</div>
					</div>
					<div class="form-actions">
						<button type="submit" class="btn-primary" [disabled]="loading || insuranceForm.invalid">
							<svg viewBox="0 0 24 24" *ngIf="!loading">
								<path fill="currentColor" d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
							</svg>
							<div class="spinner" *ngIf="loading"></div>
							<span>{{ loading ? 'Se salvează...' : 'Salvează modificări' }}</span>
						</button>
						<button type="button" class="btn-danger" (click)="deleteInsurance()" [disabled]="loading">
							<svg viewBox="0 0 24 24">
								<path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
							</svg>
							<span>Șterge asigurare</span>
						</button>
					</div>
				</form>

				   <!-- No Insurance - Add Form -->
				   <div *ngIf="!insuranceData" class="no-insurance-state no-warranty-state">
					   <div class="empty-state">
						   <svg viewBox="0 0 24 24">
							   <path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
						   </svg>
						   <h5>Nicio asigurare configurată</h5>
						   <p>Acest bun nu are încă o asigurare configurată. Adaugă una nouă.</p>
					   </div>
					   <form [formGroup]="insuranceForm" (ngSubmit)="saveInsurance()" class="add-insurance-form add-warranty-form">
						   <h5>Adaugă asigurare nouă</h5>
						   <div class="form-grid">
							   <div class="form-group">
								   <label>
									   <span>Companie *</span>
								   </label>
								   <div class="input-wrapper">
									   <input formControlName="company" type="text" placeholder="Ex: Allianz, Generali..." />
								   </div>
							   </div>
							   <div class="form-group">
								   <label>
									   <span>Valoare asigurată *</span>
								   </label>
								   <div class="input-wrapper">
									   <input formControlName="insuredValue" type="number" placeholder="0.00" />
								   </div>
							   </div>
							   <div class="form-group">
								   <label>
									   <span>Data început *</span>
								   </label>
								   <div class="input-wrapper">
									   <input formControlName="startDate" type="date" />
								   </div>
							   </div>
							   <div class="form-group">
								   <label>
									   <span>Data expirare *</span>
								   </label>
								   <div class="input-wrapper">
									   <input formControlName="endDate" type="date" />
								   </div>
							   </div>
						   </div>
						   <div class="form-actions">
							   <button type="submit" class="btn-primary" [disabled]="loading || insuranceForm.invalid">
								   <svg viewBox="0 0 24 24" *ngIf="!loading">
									   <path fill="currentColor" d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
								   </svg>
								   <div class="spinner" *ngIf="loading"></div>
								   <span>{{ loading ? 'Se salvează...' : 'Adaugă asigurare' }}</span>
							   </button>
						   </div>
					   </form>
				   </div>
			</div>
		</div>
		
	</div>
</div>