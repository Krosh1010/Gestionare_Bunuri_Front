<div class="inventory-container">
  <!-- Header -->
  <div class="inventory-header">
    <div class="header-left">
      <h1>Inventar Bunuri</h1>
      <p>GestioneazÄƒ toate activele tale dintr-un singur loc</p>
    </div>
    
    <div class="header-actions">
      <div class="search-box">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <input type="text" placeholder="CautÄƒ bunuri..." class="search-input" [(ngModel)]="searchQuery" (input)="filterAssets()">
      </div>
      
      <div class="action-buttons">
        <button class="btn-add" (click)="openAddModal()">
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
          </svg>
          AdaugÄƒ bun
        </button>
        
        <div class="filter-dropdown">
          <button class="btn-filter" [class.active]="showFilter" (click)="toggleFilter()">
            <svg class="filter-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
            </svg>
            Filtre
            <span class="filter-count" *ngIf="activeFilters > 0">{{activeFilters}}</span>
          </button>
          
          <div class="filter-panel" [class.show]="showFilter">
            <div class="filter-panel-header">
              <div class="filter-panel-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                </svg>
                <span>Filtre avansate</span>
              </div>
              <button class="filter-panel-close" (click)="toggleFilter()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>

            <div class="filter-panel-body">
              <div class="filter-section">
                <h4 class="filter-section-title">
                  <span class="section-icon">ğŸ“Š</span>Categorie
                </h4>
                <div class="filter-chips">
                  <label class="filter-chip" [class.selected]="filters.categories.electronics">
                    <input type="checkbox" [(ngModel)]="filters.categories.electronics">
                    <span class="chip-emoji">ğŸ’»</span>
                    <span class="chip-label">Electronice</span>
                  </label>
                  <label class="filter-chip" [class.selected]="filters.categories.furniture">
                    <input type="checkbox" [(ngModel)]="filters.categories.furniture">
                    <span class="chip-emoji">ğŸ›‹ï¸</span>
                    <span class="chip-label">Mobilier</span>
                  </label>
                  <label class="filter-chip" [class.selected]="filters.categories.vehicles">
                    <input type="checkbox" [(ngModel)]="filters.categories.vehicles">
                    <span class="chip-emoji">ğŸš—</span>
                    <span class="chip-label">Vehicule</span>
                  </label>
                  <label class="filter-chip" [class.selected]="filters.categories.documents">
                    <input type="checkbox" [(ngModel)]="filters.categories.documents">
                    <span class="chip-emoji">ğŸ“„</span>
                    <span class="chip-label">Documente</span>
                  </label>
                </div>
              </div>
              
              <div class="filter-divider"></div>

              <div class="filter-section">
                <h4 class="filter-section-title">
                  <span class="section-icon">ğŸ’°</span>PreÈ› (RON)
                </h4>
                <div class="price-range-inputs">
                  <div class="price-input-group">
                    <label class="price-label">Min</label>
                    <input type="number" class="price-input" placeholder="0" [(ngModel)]="filters.priceMin" min="0">
                  </div>
                  <span class="price-separator">â€”</span>
                  <div class="price-input-group">
                    <label class="price-label">Max</label>
                    <input type="number" class="price-input" placeholder="âˆ" [(ngModel)]="filters.priceMax" min="0">
                  </div>
                </div>
              </div>
              
              <div class="filter-divider"></div>

              <div class="filter-section">
                <h4 class="filter-section-title">
                  <span class="section-icon">ğŸ“</span>SpaÈ›iu / LocaÈ›ie
                </h4>
                <div class="space-filter-selects">
                  <div class="space-select-wrapper" *ngFor="let level of filterParentLevels; let i = index; trackBy: trackByLevel">
                    <select class="space-select" 
                      [ngModel]="filterSelectedParentIds[i] ?? null" 
                      (ngModelChange)="onFilterSpaceSelected(i, $event)">
                      <option [ngValue]="null">{{ i === 0 ? 'â€” Alege spaÈ›iu â€”' : 'â€” Sub-spaÈ›iu â€”' }}</option>
                      <option *ngFor="let space of level" [ngValue]="space.id">{{ space.name }}</option>
                    </select>
                  </div>
                  <div class="selected-space-badge" *ngIf="filterSelectedSpaceName">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="14" height="14">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    {{ filterSelectedSpaceName }}
                    <button class="clear-space-btn" (click)="filters.spaceId = null; filterSelectedSpaceName = null; filterParentLevels = []; filterSelectedParentIds = []; loadFilterSpaces()">
                      âœ•
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="filter-panel-footer">
              <button class="btn-filter-reset" (click)="clearFilters()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                ReseteazÄƒ
              </button>
              <button class="btn-filter-apply" (click)="applyFilters()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                AplicÄƒ filtre
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Stats Overview -->
  <div class="stats-overview">
    <div class="stat-card">
      <div class="stat-icon total">ğŸ“¦</div>
      <div class="stat-content">
        <div class="stat-value">{{totalItems}}</div>
        <div class="stat-label">Total bunuri</div>
      </div>
    </div>

    <!-- ...existing code... -->
    <div class="stat-card">
      <div class="stat-icon value">ğŸ’°</div>
      <div class="stat-content">
        <div class="stat-value">{{totalValue | currency:'USD'}}</div>
        <div class="stat-label">Valoare totalÄƒ</div>
      </div>
    </div>
    

  </div>
  
  <!-- Assets List -->
  <div class="assets-container">
    <!-- View Toggle -->
    <div class="view-toggle">
      <button class="view-btn" [class.active]="viewMode === 'grid'" (click)="setViewMode('grid')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
        </svg>
      </button>
      <button class="view-btn" [class.active]="viewMode === 'list'" (click)="setViewMode('list')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
        </svg>
      </button>
    </div>
    
    <!-- Grid View -->
    <div class="assets-grid" *ngIf="viewMode === 'grid'">
      <div class="asset-card" *ngFor="let asset of filteredAssets" >
        <div class="asset-header">
          <div class="asset-category {{asset.category}}">
            {{getCategoryIcon(asset.category)}}
          </div>
          <div class="asset-actions">
            <button class="action-btn" (click)="editAsset(asset)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
              </svg>
            </button>
            <button class="action-btn" (click)="deleteAsset(asset)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
              </svg>
            </button>
          </div>
        </div>
        
        <div class="asset-content">
          <h3 class="asset-name">{{asset.name}}</h3>
          <p class="asset-description">{{asset.description}}</p>
          
          <div class="asset-details">
            <div class="detail-item">
              <span class="detail-label">Valoare:</span>
              <span class="detail-value">{{asset.value | currency:'EUR'}}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">LocaÈ›ie:</span>
              <span class="detail-value">{{asset.spaceName}}</span>
            </div>
                        <div class="detail-item">
              <span class="detail-label">Categorie:</span>
              <span class="detail-value">{{getCategoryText(asset.category)}}</span>
            </div>
          </div>
        </div>
        
        <div class="asset-footer">

<div class="status-badges-container">
  <span class="status-badge warranty-badge" 
        [ngClass]="getWarrantyStatusClass(asset.warrantyStatus)">
    <span class="badge-icon">ğŸ›¡ï¸</span>
    <span class="badge-text">{{getWarrantyStatusText(asset.warrantyStatus)}}</span>
  </span>
  <span class="status-badge insurance-badge" 
        [ngClass]="getInsuranceStatusClass(asset.insuranceStatus)">
    <span class="badge-icon">ğŸ“„</span>
    <span class="badge-text">{{getInsuranceStatusText(asset.insuranceStatus)}}</span>
  </span>
</div>
          <div class="asset-dates">
            <div class="date-item" *ngIf="asset.purchaseDate">
              <span class="date-label">AchiziÈ›ionat:</span>
              <span class="date-value">{{asset.purchaseDate | date:'dd.MM.yyyy'}}</span>
            </div>
            <div class="date-item">
              <span class="date-label">GaranÈ›ie pÃ¢nÄƒ la:</span>
              <span class="date-value">
                <ng-container *ngIf="asset.warrantyEndDate; else noWarrantyDate">
                  {{asset.warrantyEndDate | date:'dd.MM.yyyy'}}
                </ng-container>
                <ng-template #noWarrantyDate>-</ng-template>
              </span>
            </div>
            <div class="date-item">
              <span class="date-label">Asigurat pÃ¢nÄƒ la:</span>
              <span class="date-value">
                <ng-container *ngIf="asset.insuranceEndDate; else noInsuranceDate">
                  {{asset.insuranceEndDate | date:'dd.MM.yyyy'}}
                </ng-container>
                <ng-template #noInsuranceDate>-</ng-template>
              </span>
            </div>
              <div class="date-item" *ngIf="asset.customTrackerName">
                <span class="date-label">{{asset.customTrackerName}} pÃ¢nÄƒ la:</span>
                <span class="date-value">
                  <ng-container *ngIf="asset.customTrackerEndDate; else noCustomTrackerDate">
                    {{asset.customTrackerEndDate | date:'dd.MM.yyyy'}}
                  </ng-container>
                  <ng-template #noCustomTrackerDate>-</ng-template>
                </span>
              </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- List View -->
    <div class="assets-list" *ngIf="viewMode === 'list'">
      <div class="list-header">
        <div class="list-column name">Nume bun</div>
        <div class="list-column category">Categorie</div>
        <div class="list-column value">Valoare</div>
        <div class="list-column location">LocaÈ›ie</div>
        <div class="list-column status">Status</div>
        <div class="list-column warranty">GaranÈ›ie / Asigurare</div>
        <div class="list-column actions">AcÈ›iuni</div>
      </div>
      
      <div class="list-items">
        <div class="list-item" *ngFor="let asset of filteredAssets; let i = index" [class.alt-row]="i % 2 === 1">
          <!-- Nume -->
          <div class="list-cell name">
            <div class="asset-info">
              <div class="asset-icon-wrapper {{asset.category}}">
                <span class="asset-icon-emoji">{{getCategoryIcon(asset.category)}}</span>
              </div>
              <div class="asset-text">
                <div class="asset-title">{{asset.name}}</div>
                <div class="asset-subtitle" *ngIf="asset.description">{{asset.description}}</div>
              </div>
            </div>
          </div>
          
          <!-- Categorie -->
          <div class="list-cell category">
            <span class="category-pill {{asset.category}}">
              {{getCategoryText(asset.category)}}
            </span>
          </div>
          
          <!-- Valoare -->
          <div class="list-cell value">
            <span class="value-amount">{{asset.value | currency:'EUR'}}</span>
          </div>
          
          <!-- Locatie -->
          <div class="list-cell location">
            <div class="location-chip">
              <svg class="location-pin" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="14" height="14">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              <span>{{asset.spaceName || 'â€”'}}</span>
            </div>
          </div>
          
          <!-- Status -->
          <div class="list-cell status">
            <div class="status-stack">
              <span class="status-tag warranty-tag" 
                    [ngClass]="getWarrantyStatusClass(asset.warrantyStatus)">
                <span class="tag-dot"></span>
                ğŸ›¡ï¸ {{getWarrantyStatusText(asset.warrantyStatus)}}
              </span>
              <span class="status-tag insurance-tag" 
                    [ngClass]="getInsuranceStatusClass(asset.insuranceStatus)">
                <span class="tag-dot"></span>
                ğŸ“„ {{getInsuranceStatusText(asset.insuranceStatus)}}
              </span>
            </div>
          </div>
          
          <!-- Garantie / Asigurare -->
          <div class="list-cell warranty">
            <div class="dates-stack">
              <div class="date-row">
                <span class="date-label-text">GaranÈ›ie pÃ¢nÄƒ la:</span>
                <span class="date-text" *ngIf="asset.warrantyEndDate">{{asset.warrantyEndDate | date:'dd.MM.yyyy'}}</span>
                <span class="date-text muted" *ngIf="!asset.warrantyEndDate">â€”</span>
                <span class="days-left" *ngIf="getWarrantyDays(asset)">{{getWarrantyDays(asset)}}z</span>
              </div>
              <div class="date-row">
                <span class="date-label-text">Asigurare pÃ¢nÄƒ la :</span>
                <span class="date-text" *ngIf="asset.insuranceEndDate">{{asset.insuranceEndDate | date:'dd.MM.yyyy'}}</span>
                <span class="date-text muted" *ngIf="!asset.insuranceEndDate">â€”</span>
              </div>
                <div class="date-row" *ngIf="asset.customTrackerName">
                  <span class="date-label-text">{{asset.customTrackerName}} pÃ¢nÄƒ la:</span>
                  <span class="date-text" *ngIf="asset.customTrackerEndDate">{{asset.customTrackerEndDate | date:'dd.MM.yyyy'}}</span>
                  <span class="date-text muted" *ngIf="!asset.customTrackerEndDate">â€”</span>
                </div>
            </div>
          </div>
          
          <!-- Actiuni -->
          <div class="list-cell actions">
            <div class="actions-row">
              <button class="action-pill view" (click)="viewAsset(asset)" title="Vezi detalii">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                </svg>
              </button>
              <button class="action-pill edit" (click)="editAsset(asset)" title="EditeazÄƒ">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
              </button>
              <button class="action-pill delete" (click)="deleteAsset(asset)" title="È˜terge">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination-container" *ngIf="totalPages > 1">
      <div class="pagination-info">
        Pagina {{currentPage}} din {{totalPages}} ({{totalItems}} bunuri)
      </div>
      <div class="pagination-controls">
        <button class="pagination-btn" [disabled]="currentPage === 1" (click)="prevPage()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>

        <ng-container *ngIf="getVisiblePages()[0] > 1">
          <button class="pagination-btn page-btn" (click)="goToPage(1)">1</button>
          <span class="pagination-ellipsis" *ngIf="getVisiblePages()[0] > 2">...</span>
        </ng-container>

        <button *ngFor="let page of getVisiblePages()"
          class="pagination-btn page-btn"
          [class.active]="page === currentPage"
          (click)="goToPage(page)">
          {{page}}
        </button>

        <ng-container *ngIf="getVisiblePages()[getVisiblePages().length - 1] < totalPages">
          <span class="pagination-ellipsis" *ngIf="getVisiblePages()[getVisiblePages().length - 1] < totalPages - 1">...</span>
          <button class="pagination-btn page-btn" (click)="goToPage(totalPages)">{{totalPages}}</button>
        </ng-container>

        <button class="pagination-btn" [disabled]="currentPage === totalPages" (click)="nextPage()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
  
  <!-- Loading Overlay -->
  <div class="loading-overlay" *ngIf="isLoadingAssets">
    <div class="loading-spinner"></div>
    <span>Se Ã®ncarcÄƒ...</span>
  </div>

  <!-- No Results -->
  <div class="no-results" *ngIf="filteredAssets.length === 0">
    <div class="no-results-icon">ğŸ“¦</div>
    <h3>Nu s-au gÄƒsit bunuri</h3>
    <p>ÃncearcÄƒ sÄƒ modifici filtrele sau adaugÄƒ un nou bun</p>
    <button class="btn-add-large" (click)="openAddModal()">
      <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
      AdaugÄƒ primul bun
    </button>
  </div>
</div>

<!-- Add/Edit Asset Modal -->
<div class="modal-overlay" [class.show]="showModal">
  <div class="modal-container">
    <div class="modal-header">
      <h2>{{editingAsset ? 'EditeazÄƒ bun' : 'AdaugÄƒ bun nou'}}</h2>
      <button class="modal-close" (click)="closeModal()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    
    <form class="modal-form" [formGroup]="assetForm" (ngSubmit)="saveAsset()" [class.form-disabled]="showWarrantySettingsModal">
      <style>
      .form-disabled {
        pointer-events: none;
        opacity: 0.6;
      }
      .modal-overlay[style*="display: block"] ~ .modal-overlay[style*="display: block"] {
        z-index: 1100;
      }
      </style>
      <div class="form-row">
        <div class="form-group">
          <label>Nume bun *</label>
          <input type="text" formControlName="name" placeholder="Ex: Laptop Dell XPS 15">
        </div>
        
        <div class="form-group">
          <label>Categorie *</label>
          <select formControlName="category">
            <option value="">SelecteazÄƒ categoria</option>
            <option value="electronics">Electronice</option>
            <option value="furniture">Mobilier</option>
            <option value="vehicles">Vehicule</option>
            <option value="documents">Documente</option>
            <option value="other">Altele</option>
          </select>
        </div>
      </div>
      
      <div class="form-group">
        <label>Descriere</label>
        <textarea formControlName="description" placeholder="Descrierea bunului..." rows="3"></textarea>
      </div>
      
      <div class="form-row">
        <div class="form-group" style="flex:1; min-width:180px;">
          <label>Valoare (EUR) *</label>
          <input type="number" formControlName="value" placeholder="0.00">
        </div>
        <div class="form-group" style="flex:1; min-width:220px;">
          <label>SpaÈ›iu *</label>
          <ng-container>
            <ng-container *ngFor="let level of parentLevels; let i = index; trackBy: trackByLevel">
              <div style="display:flex; align-items:center; gap:8px">
                <select
                  class="space-dropdown"
                  [ngModel]="selectedParentIds[i] ?? null"
                  (ngModelChange)="onParentSelected(i, $event)"
                  [ngModelOptions]="{ standalone: true }"
                  [attr.aria-label]="'SpaÈ›iu nivel ' + (i + 1)"
                >
                  <option [ngValue]="null">{{ i === 0 ? 'Alege spaÈ›iul...' : 'Alege sub-spaÈ›iul...' }}</option>
                  <option *ngFor="let space of level" [ngValue]="space.id">
                    {{ space.name }}
                  </option>
                </select>
                <span *ngIf="isLoadingSpaces && i === parentLevels.length - 1">
                  <span class="spinner"></span>
                </span>
              </div>
            </ng-container>
          </ng-container>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>Data achiziÈ›iei</label>
          <input type="date" formControlName="purchaseDate" [max]="todayString">
        </div>
        <!-- Buton pentru setÄƒri garanÈ›ie/asigurare, doar la editare, pe acelaÈ™i rÃ¢nd cu data achiziÈ›iei -->
        <div class="form-group" *ngIf="editingAsset">
  <button type="button" class="warranty-settings-btn" (click)="openWarrantySettingsModal()">
    <div class="btn-icon-container">
      <svg class="settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="12" cy="12" r="3" stroke-width="2"/>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06A1.65 1.65 0 0015 19.4a1.65 1.65 0 00-1.31.76 1.65 1.65 0 01-2.78 0A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.6 15a1.65 1.65 0 00-.76-1.31 1.65 1.65 0 010-2.78A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.6c.29-.19.62-.3.97-.3s.68.11.97.3A1.65 1.65 0 0015 4.6a1.65 1.65 0 001.31-.76 2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9c.19.29.3.62.3.97s-.11.68-.3.97A1.65 1.65 0 0019.4 15z"/>
      </svg>
    </div>
    <span class="btn-text">SetÄƒri garanÈ›ie/asigurare</span>
    <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
    </svg>
  </button>
</div>

      </div>

      <div class="modal-actions">
        <button type="button" class="btn-cancel" (click)="closeModal()">AnuleazÄƒ</button>
        <button type="submit" class="btn-save" [disabled]="assetForm.invalid || !assetForm.value.spaceId">
          {{editingAsset ? 'SalveazÄƒ modificÄƒri' : 'AdaugÄƒ bun'}}
        </button>
      </div>
    </form>
  </div>
<!-- Modal Warranty/Insurance dupÄƒ crearea bunului -->
</div>
<div class="modal-overlay" [class.show]="showWarrantyModal">
  <!-- DEBUG: Afiseaza valorile pentru troubleshooting -->
  <div class="modal-container">
    <div class="modal-header">
      <h2>CompleteazÄƒ garanÈ›ie È™i asigurare</h2>
      <button class="modal-close" (click)="closeWarrantyModal()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <app-warranty-insurance-form
      [assetId]="createdAssetId"
      (close)="closeWarrantyModal()"
    ></app-warranty-insurance-form>
  </div>
<!-- Modal SetÄƒri GaranÈ›ie/Asigurare la editare asset -->

</div>
<div class="modal-overlay" [class.show]="showWarrantySettingsModal">
  <div class="modal-container">
    <div class="modal-header">
      <h2></h2>
      <button class="modal-close" (click)="closeWarrantySettingsModal()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <app-warranty-insurance-setings
      [assetId]="editingAsset?.id ?? null"
      (close)="closeWarrantySettingsModal()"
    ></app-warranty-insurance-setings>
  </div>
</div>