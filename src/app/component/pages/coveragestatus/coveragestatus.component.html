<div class="warranty-status-container">
  <!-- Header -->
  <div class="header-section">
    <div class="header-content">
      <h1 class="main-title">ğŸ·ï¸ Status GaranÈ›ii & AsigurÄƒri</h1>
      <p class="subtitle">MonitorizeazÄƒ È™i gestioneazÄƒ garanÈ›iile È™i asigurÄƒrile bunurilor tale</p>
    </div>
    
    <div class="last-update">
      <span class="update-icon">ğŸ”„</span>
      <span class="update-text">Actualizat: {{lastUpdate | date:'dd.MM.yyyy HH:mm'}}</span>
    </div>
  </div>

  <!-- Main Controls -->
  <div class="controls-section">
    <div class="control-group">
      <h3 class="control-title">1. Alege tipul</h3>
      <div class="type-selector">
        <button class="type-btn" [class.active]="selectedType === 'warranty'" (click)="selectType('warranty')">
          <span class="type-icon">ğŸ›¡ï¸</span>
          <span class="type-text">GaranÈ›ii</span>
        </button>
        <button class="type-btn" [class.active]="selectedType === 'insurance'" (click)="selectType('insurance')">
          <span class="type-icon">ğŸ“„</span>
          <span class="type-text">AsigurÄƒri</span>
        </button>
      </div>
    </div>

    <div class="control-group">
      <h3 class="control-title">2. Alege statusul</h3>
      <div class="status-selector">
        <button class="status-btn" [class.active]="selectedStatus === 'expired'" (click)="selectStatus('expired')">
          <span class="status-indicator expired"></span>
          <span class="status-text">Expirate</span>
          <span class="status-count">{{getStatusCount('expired')}}</span>
        </button>
        <button class="status-btn" [class.active]="selectedStatus === 'expiring-soon'" (click)="selectStatus('expiring-soon')">
          <span class="status-indicator expiring-soon"></span>
          <span class="status-text">Aproape expirÄƒ (<30 zile)</span>
          <span class="status-count">{{getStatusCount('expiring-soon')}}</span>
        </button>
        <button class="status-btn" [class.active]="selectedStatus === 'active'" (click)="selectStatus('active')">
          <span class="status-indicator active"></span>
          <span class="status-text">Active (>30 zile)</span>
          <span class="status-count">{{getStatusCount('active')}}</span>
        </button>
      </div>
    </div>

  <!-- Stats Overview -->
  <div class="stats-overview">
    <div class="stat-card total">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <div class="stat-value">{{totalItems}}</div>
        <div class="stat-label">Total {{selectedType === 'warranty' ? 'garanÈ›ii' : 'asigurÄƒri'}}</div>
      </div>
    </div>
    
    <div class="stat-card expired">
      <div class="stat-icon">â°</div>
      <div class="stat-content">
        <div class="stat-value">{{getStatusCount('expired')}}</div>
        <div class="stat-label">Expirate</div>
      </div>
    </div>
    
    <div class="stat-card expiring">
      <div class="stat-icon">âš ï¸</div>
      <div class="stat-content">
        <div class="stat-value">{{getStatusCount('expiring-soon')}}</div>
        <div class="stat-label">Aproape expirÄƒ</div>
      </div>
    </div>
    
    <div class="stat-card active">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <div class="stat-value">{{getStatusCount('active')}}</div>
        <div class="stat-label">Active</div>
      </div>
    </div>
    
    <div class="stat-card value">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-content">
        <div class="stat-value">{{totalValue | currency:'EUR'}}</div>
        <div class="stat-label">Valoare totalÄƒ</div>
      </div>
    </div>
  </div>

  <!-- Items List -->
  <div class="items-container">
    <div class="items-header">
      <h2>{{getTitle()}}</h2>
      <div class="items-count">{{filteredItems.length}} {{selectedType === 'warranty' ? 'garanÈ›ii' : 'asigurÄƒri'}} gÄƒsite</div>
    </div>
    
    <!-- Table View -->
    <div class="items-table" *ngIf="filteredItems.length > 0">
      <div class="table-header">
        <div class="table-col name">Nume bun</div>
        <div class="table-col category">Categorie</div>
        <div class="table-col value">Valoare</div>
        <div class="table-col dates">Date relevante</div>
        <div class="table-col status">Status</div>
        <div class="table-col days">Zile rÄƒmase</div>
      </div>
      
      <div class="table-body">
        <div class="table-row" *ngFor="let item of filteredItems" [class.expiring-soon]="isExpiringSoon(item)">
          <div class="table-col name">
            <div class="item-name">
              <span class="item-icon">{{getCategoryIcon(item.category)}}</span>
              {{item.name}}
            </div>
            <div class="item-id">ID: {{item.id}}</div>
          </div>
          
          <div class="table-col category">
            <span class="category-badge" [ngClass]="item.category">
              {{getCategoryText(item.category)}}
            </span>
          </div>
          
          <div class="table-col value">
            {{item.value | currency:'EUR'}}
          </div>
          
          <div class="table-col dates">
            <div class="date-item">
              <span class="date-label">AchiziÈ›ionat:</span>
              <span class="date-value">{{item.purchaseDate | date:'dd.MM.yyyy'}}</span>
            </div>
            <div class="date-item">
              <span class="date-label" *ngIf="selectedType === 'warranty'">GaranÈ›ie pÃ¢nÄƒ:</span>
              <span class="date-label" *ngIf="selectedType === 'insurance'">Asigurat pÃ¢nÄƒ:</span>
              <span class="date-value" [class.warning]="isExpiringSoon(item)">
                {{getExpirationDate(item) | date:'dd.MM.yyyy'}}
              </span>
            </div>
          </div>
          
          <div class="table-col status">
            <span class="status-badge" [ngClass]="getItemStatusClass(item)">
              {{getItemStatusText(item)}}
            </span>
          </div>
          
          <div class="table-col days">
            <div class="days-count" [class.warning]="isExpiringSoon(item)">
              {{getDaysRemaining(item)}}
              <span class="days-text">zile</span>
            </div>
            <div class="days-progress">
              <div class="progress-bar" [style.width.%]="getProgressPercentage(item)"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- No Results -->
    <div class="no-results" *ngIf="filteredItems.length === 0">
      <div class="no-results-icon">
        {{selectedType === 'warranty' ? 'ğŸ›¡ï¸' : 'ğŸ“„'}}
      </div>
      <h3>Nu s-au gÄƒsit {{selectedType === 'warranty' ? 'garanÈ›ii' : 'asigurÄƒri'}}</h3>
      <p>ÃncearcÄƒ sÄƒ modifici filtrele sau selecteazÄƒ alt status</p>
      <button class="btn-explore" (click)="clearFilters()">
        ReseteazÄƒ filtrele
      </button>
    </div>
    
    <!-- Pagination -->
    <div class="pagination" *ngIf="filteredItems.length > 0">
      <div class="pagination-info">
        AfiÈ™ate {{startIndex + 1}}-{{endIndex}} din {{filteredItems.length}}
      </div>
      <div class="pagination-controls">
        <button class="page-btn" [disabled]="currentPage === 1" (click)="prevPage()">
          â† Anterior
        </button>
        <div class="page-numbers">
          <span *ngFor="let page of getPageNumbers()">
            <button class="page-number" [class.active]="page === currentPage" (click)="goToPage(page)">
              {{page}}
            </button>
          </span>
        </div>
        <button class="page-btn" [disabled]="currentPage === totalPages" (click)="nextPage()">
          UrmÄƒtor â†’
        </button>
      </div>
    </div>
  </div>
</div>